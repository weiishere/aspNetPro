(function(g){g.onresize=function(){LGlobal.resize()};LGlobal.destroy=true;LGlobal.stageScale=LStageScaleMode.EXACT_FIT;LGlobal.aspectRatio=PORTRAIT;var d;(function(){g.ApiUrl="http://112.74.86.15:803";g.isClearCacheImg=true;g.time=0;g.score1;g.score2;g.but_voice;g.but_game;g.item_x=10;g.item_y=10;g.gameMainPanel;g.bgBlocks;g.BlocksWrap;g.activeBlock=undefined;g.score_x=[];g.score_y=[];g.version="v2.53";g.mySoundPlayer;g.isDisableScreen=false;g.imgData=new Array({name:"number1_0",path:"img/number1/number1_0.png"},{name:"number1_1",path:"img/number1/number1_1.png"},{name:"number1_2",path:"img/number1/number1_2.png"},{name:"number1_3",path:"img/number1/number1_3.png"},{name:"number1_4",path:"img/number1/number1_4.png"},{name:"number1_5",path:"img/number1/number1_5.png"},{name:"number1_6",path:"img/number1/number1_6.png"},{name:"number1_7",path:"img/number1/number1_7.png"},{name:"number1_8",path:"img/number1/number1_8.png"},{name:"number1_9",path:"img/number1/number1_9.png"},{name:"number2_0",path:"img/number2/number1_0.png"},{name:"number2_1",path:"img/number2/number1_1.png"},{name:"number2_2",path:"img/number2/number1_2.png"},{name:"number2_3",path:"img/number2/number1_3.png"},{name:"number2_4",path:"img/number2/number1_4.png"},{name:"number2_5",path:"img/number2/number1_5.png"},{name:"number2_6",path:"img/number2/number1_6.png"},{name:"number2_7",path:"img/number2/number1_7.png"},{name:"number2_8",path:"img/number2/number1_8.png"},{name:"number2_9",path:"img/number2/number1_9.png"},{name:"icon_voice_close",path:"img/icon_voice_close.png"},{name:"icon_share",path:"img/icon_share.png"},{name:"over_bg",path:"img/over_bg.png"},{name:"stop",path:"img/stop.png"},{name:"play",path:"img/play.png"},{name:"jiangbei",path:"img/jiangbei.png"},{name:"fk_de_2",path:"img/fk_de_2.png"},{name:"icon_voice",path:"img/icon_voice.png"});if(isClearCacheImg){for(var j=0;j<imgData.length;j++){if(imgData[j].type){continue}imgData[j].path=imgData[j].path+"?v="+version}}imgData.push({name:"dropIn",path:"sound/s_dropIn.wav"});imgData.push({name:"dropInFail",path:"sound/s_dropInFail.wav"});imgData.push({name:"gameover",path:"sound/s_gameover.wav"});imgData.push({name:"getScore",path:"sound/s_getScore.wav"});g.dataList=imgData})();(function(){g.extend=function(){var r=arguments[0]||{},o=1,l=arguments.length,k=false,n;if(typeof r==="boolean"){k=r;r=arguments[1]||{};o=2}if(typeof r!=="object"&&!jQuery.isFunction(r)){r={}}if(l==o){r=this;--o}for(o=0;o<l;o++){if((n=arguments[o])!=null){for(var m in n){var p=r[m],q=n[m];if(r===q){continue}if(k&&q&&typeof q==="object"&&!q.nodeType){r[m]=jQuery.extend(k,p||(q.length!=null?[]:{}),q)}else{if(q!==undefined){r[m]=q}}}}}return r};g.getRedom=function(k,l){switch(arguments.length){case 1:return parseInt(Math.random()*k+1);case 2:return parseInt(Math.random()*(l-k+1)+k);default:return 0}};g.soundList=["s_dropIn.wav","s_dropInFail.wav","s_gameover.wav","s_getScore.wav"];g.soundArray=[];g.loadSound=function(){if(!LSound.webAudioEnabled){return}for(var m=0;m<soundList.length;m++){var l=soundList[m];var k=false;for(var o=0;o<soundArray.length;o++){if(soundArray[o].name==l){k=true;theSound=soundArray[o].sound;break}}if(!k){var n=new LSound();soundArray.push({name:l,sound:n});n.load("sound/"+l);break}}};g.isAllowPlay=true;g.playSound=function(l,k){if(!isAllowPlay){return false}document.getElementById(l).play()};g.getParameterByName=function(k){k=k.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var m=new RegExp("[\\?&]"+k+"=([^&#]*)"),l=m.exec(location.search);return l===null?"":decodeURIComponent(l[1].replace(/\+/g," "))};g.base64Coder=(function(){var l={};var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var m=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);l.base64encode=function(t){var p,r,n;var s,q,o;n=t.length;r=0;p="";while(r<n){s=t.charCodeAt(r++)&255;if(r==n){p+=k.charAt(s>>2);p+=k.charAt((s&3)<<4);p+="==";break}q=t.charCodeAt(r++);if(r==n){p+=k.charAt(s>>2);p+=k.charAt(((s&3)<<4)|((q&240)>>4));p+=k.charAt((q&15)<<2);p+="=";break}o=t.charCodeAt(r++);p+=k.charAt(s>>2);p+=k.charAt(((s&3)<<4)|((q&240)>>4));p+=k.charAt(((q&15)<<2)|((o&192)>>6));p+=k.charAt(o&63)}return p};l.base64decode=function(u){var t,s,q,o;var r,n,p;n=u.length;r=0;p="";while(r<n){do{t=m[u.charCodeAt(r++)&255]}while(r<n&&t==-1);if(t==-1){break}do{s=m[u.charCodeAt(r++)&255]}while(r<n&&s==-1);if(s==-1){break}p+=String.fromCharCode((t<<2)|((s&48)>>4));do{q=u.charCodeAt(r++)&255;if(q==61){return p}q=m[q]}while(r<n&&q==-1);if(q==-1){break}p+=String.fromCharCode(((s&15)<<4)|((q&60)>>2));do{o=u.charCodeAt(r++)&255;if(o==61){return p}o=m[o]}while(r<n&&o==-1);if(o==-1){break}p+=String.fromCharCode(((q&3)<<6)|o)}return p};return l})();LTextField.prototype.align=function(k){if(k){this.x=(k.getWidth()-this.getWidth())/2}else{this.x=(LGlobal.width-this.getWidth())/2}};LTextField.prototype.alignY=function(k){if(k){this.y=(k.getHeight()-this.getHeight())/2}else{this.y=(LGlobal.height-this.getHeight())/2}};LSprite.prototype.ObjectList=function(o){var m=new Array();for(var n=0,k=this.childList.length;n<k;n++){var p=this.childList[n];if(p.type===o){m.push(p)}}return m};LShape.prototype.relationSprite=null;LSprite.prototype.align=function(k){if(k){this.x=(k.getWidth()-this.getWidth())/2}else{this.x=(LGlobal.width-this.getWidth())/2}};LSprite.prototype.isActive=false;LSprite.prototype.alignY=function(k){if(k){this.y=(k.getHeight()-this.getHeight())/2}else{this.y=(LGlobal.height-this.getHeight())/2}};g.createSprite=function(m,l){if(typeof m=="function"){var n=new LSprite();m.call(n);return n}var o=extend({x:0,y:0,image:"",click:undefined,},m||{});var n=new LSprite();n.x=o.x;n.y=o.y;if(o.image!=""){var k=new LBitmap(new LBitmapData(imglist[o.image]));n.addChild(k)}if(o.click){n.addEventListener(LMouseEvent.MOUSE_UP,function(p){o.click.call(n,p)})}if(l){l.call(n)}return n};g.createText=function(o,l,k){var n=extend({x:0,y:0,color:"#ae7318",size:20},l||{});var m=new LTextField();m.text=o;m.size=n.size;m.color=n.color;m.y=n.y;m.x=n.x;if(k){k.call(m)}return m};function j(l,k){base(this,LSprite,[]);this.text=l;this.time=k;this.setView();return this}j.prototype.setView=function(){var k=this;var l=new LShape();var m=createText(k.text,{color:"#fff",size:24});l.graphics.drawRect(0,"#ff0000",[10,10,m.getWidth()+40,50],true,"#000000");l.y=800;m.y=820;l.x=(LGlobal.width-l.getWidth())/2;m.x=(LGlobal.width-m.getWidth())/2+10;k.addChild(l);k.addChild(m);k.close=function(){LTweenLite.to(k,0.6,{loop:false,ease:LEasing.Sine.easeOut,alpha:0,onComplete:function(){k.remove()}})};if(k.time!=0){window.setTimeout(function(){k.close()},k.time)}};j.prototype.text="";j.prototype.time="";j.prototype.close=function(){};Array.prototype.isContain=function(m){var k=false;for(var l=0;l<this.length;l++){if(this[l]==m){k=true;break}}return k};g.Trip=j})();function e(){LSystem.screen(LStage.FULL_SCREEN);backLayer=createSprite();backLayer.graphics.drawRect(1,"#cccccc",[0,0,LGlobal.width,LGlobal.height],true,"#000000");eventBackLayer=createSprite();eventBackLayer.graphics.drawRect(1,"#cccccc",[0,0,LGlobal.width,LGlobal.height],true,"#fff");addChild(backLayer);addChild(eventBackLayer);loadingLayer=new LoadingSample1();backLayer.addChild(loadingLayer);LLoadManage.load(imgData,function(j){loadingLayer.setProgress(j)},h)}function h(j){g.imglist=j;backLayer.die();backLayer.removeAllChild();backLayer.graphics.drawRect(0,"#cccccc",[0,0,LGlobal.width,LGlobal.height],true,"#ffffff");addChild(backLayer);f.init()}var i={indexPage:function(){var q=new LSprite();LMouseEventContainer.set(LMouseEvent.MOUSE_MOVE,true);LMouseEventContainer.set(LMouseEvent.MOUSE_UP,true);LMouseEventContainer.set(LMouseEvent.MOUSE_DOWN,true);LMouseEventContainer.set(LMouseEvent.MOUSE_OUT,true);but_voice=createSprite({x:540,y:80,image:"icon_voice"},function(){q.addChild(this);this.addEventListener(LMouseEvent.MOUSE_DOWN,function(r){var j=r.target;but_voice.removeAllChild();if(!isAllowPlay){but_voice.addChild(new LBitmap(new LBitmapData(imglist.icon_voice)))}else{but_voice.addChild(new LBitmap(new LBitmapData(imglist.icon_voice_close)))}isAllowPlay=!isAllowPlay})});score1=new b("0");score1.x=(LGlobal.width/2-score1.getWidth())/2;score1.y=80;score1.spacing=4;q.addChild(createSprite({x:250,y:35,image:"jiangbei"}));score2=new b("0",1,2);score2.scale=0.7;score2.x=(LGlobal.width/2-score2.getWidth())/2+LGlobal.width/2-30;score2.y=90;score2.spacing=4;score2.setNumber(parseInt(getParameterByName("MaxScore")),function(){score2.x=(LGlobal.width/2-score2.getWidth())/2+LGlobal.width/2-30;q.addChild(score2)});q.addChild(but_voice);q.addChild(score1);gameMainPanel=createSprite({x:45,y:200});bgBlocks=new Array();for(var p=0;p<item_x;p++){var l=55*p;bgBlocks.push(new Array());for(var o=0;o<item_y;o++){bgBlocks[p][o]={sign:0,color:"#E2E2E2"};var n=55*o;var m=new LSprite();m.x=n;m.y=l;var k=new LShape();k.graphics.drawRoundRect(0,"#ff0000",[0,0,52,52,7],true,bgBlocks[p][o].color);m.addChild(k);gameMainPanel.addChild(m)}}q.addChild(gameMainPanel);return q},gameOver:function(){playSound("s_gameover",function(){});var j=BlocksWrap.ObjectList("LShape");for(var k=0;k<j.length;k++){j[k].die()}var l=new LSprite();l.addChild(createSprite({image:"over_bg"}));l.addChild(createText("游戏结束",{y:220,color:"#ffffff",size:40},function(){this.align()}));l.addChild(createText(score1.value,{y:390,color:"#ffffff",size:40},function(){this.align()}));if(score1.value>score2.value){l.addChild(createSprite({image:"icon_share",x:450,y:380,click:function(){}}))}var n="{ 'MemberID': "+getParameterByName("MemberID")+", 'Score': score1.value, 'Type': '9','timer':'"+parseInt(Math.random()*10000)+"' }";if(getParameterByName("ChallengeID")){n.ChallengeID=getParameterByName("ChallengeID")}var m=base64Coder.base64encode(n);LAjax.responseType=LAjax.JSON;LAjax.get(ApiUrl+"/api.aspx?method=GamesApi.AddGameH5Record&params="+m,{},function(o){if(o.state==2||o.state==3){Trip(o.msg,3000)}});return l}};var f={testMoveing:function(){var k=BlocksWrap.ObjectList("LShape");for(var n=0,m=k.length;n<m;n++){var j=k[n].relationSprite;if(j.state!=1&&j.state!=3){return true}}return false},init:function(){var n=this;addChild(i.indexPage());BlocksWrap=createSprite();addChild(BlocksWrap);eventBackLayer.addEventListener(LMouseEvent.MOUSE_OUT,function(l){if(activeBlock){backLayer.addShape(LShape.RECT,[0,0,640,960]);activeBlock.stopDrag();LTweenLite.to(activeBlock,0.2,{scaleX:0.5,scaleY:0.5,x:activeBlock.position.x,y:activeBlock.position.y,ease:LEasing.Sine.easeOut,});activeBlock.state=1;activeBlock=undefined}});eventBackLayer.addEventListener(LMouseEvent.MOUSE_MOVE,function(l){if(!activeBlock){return false}activeBlock.x=l.offsetX-activeBlock.width/2;activeBlock.y=l.offsetY-activeBlock.cony});eventBackLayer.addEventListener(LMouseEvent.MOUSE_UP,function(o){if(!activeBlock){return false}if(!f.testState(activeBlock)){playSound("s_dropInFail",function(){});activeBlock.stopDrag();backLayer.clearShape();if(!activeBlock){return false}activeBlock.scaleX=activeBlock.scaleY=0.5;activeBlock.x=activeBlock.position.x;activeBlock.y=activeBlock.position.y;activeBlock.state=1;activeBlock=undefined}else{var l=parseInt(score1.value);score1.setNumber(l+activeBlock.score,function(){score1.x=(LGlobal.width/2-score1.getWidth())/2});activeBlock.remove();if(score_x.length!=0||score_y.length!=0){playSound("s_getScore",function(){})}else{playSound("s_dropIn",function(){})}f.refreshMainPanel();activeBlock.state=3;activeBlock=undefined;if(BlocksWrap.ObjectList("LSprite").length==0){f.addWaitBlocks()}}});g.blockShape1=new LShape();g.blockShape2=new LShape();g.blockShape3=new LShape();blockShape1.graphics.drawRoundRect(0,"#ff0000",[10,760,200,200,7],true,"#fff");blockShape2.graphics.drawRoundRect(0,"#ff0000",[220,760,200,200,7],true,"#fff");blockShape3.graphics.drawRoundRect(0,"#ff0000",[430,760,200,200,7],true,"#fff");BlocksWrap.addChild(blockShape1);BlocksWrap.addChild(blockShape2);BlocksWrap.addChild(blockShape3);var j=BlocksWrap.ObjectList("LShape");for(var m=0,k=j.length;m<k;m++){(function(l){var o=j[l];o.addEventListener(LMouseEvent.MOUSE_DOWN,function(q){if(n.testMoveing()){return}if(activeBlock){return false}var p=q.clickTarget.relationSprite;p.isMoveIng=true;if(p.state!=1){return false}loadSound();p.startDrag(q.touchPointID);p.x=q.offsetX-p.width/2;p.y=q.offsetY-p.cony;p.state=2;activeBlock=p;p.scaleX=p.scaleY=1})})(m)}this.addWaitBlocks()},addWaitBlocks:function(){var n=function(){var t=getRedom(1,100);var s=0;var r=[0,1,2,7,8,9,10,11];var q=[3,4,5,6,12,13,14,15,16,17,18];var u=function(v){if(t<=v){return r[getRedom(0,r.length-1)]}else{return q[getRedom(0,q.length-1)]}};if(score1.value<999){s=u(65)}else{if(score1.value>=1000&&score1.value<1999){s=u(55)}else{if(score1.value>=2000&&score1.value<2999){s=u(45)}else{s=u(33)}}}return s};var m=new c(n());m.x=250;m.y=860-m.getHeight()/2;m.alpha=0;BlocksWrap.addChild(m);var l=new c(n());l.x=480;l.y=860-l.getHeight()/2;l.alpha=0;BlocksWrap.addChild(l);var k=new c(n());k.x=LGlobal.width;k.y=860-k.getHeight()/2;k.alpha=0;BlocksWrap.addChild(k);var j=110-m.getWidth()/2;var p=320-l.getWidth()/2;var o=530-k.getWidth()/2;blockShape1.relationSprite=m;blockShape2.relationSprite=l;blockShape3.relationSprite=k;LTweenLite.to(m,0.1,{x:j,alpha:1,onComplete:function(q){m.state=1;m.position={x:m.x,y:m.y}}});LTweenLite.to(l,0.1,{x:p,alpha:1,onComplete:function(q){l.state=1;l.position={x:l.x,y:l.y}}});LTweenLite.to(k,0.1,{x:o,alpha:1,onComplete:function(q){k.state=1;k.position={x:k.x,y:k.y}}});f.isGameOver()},refreshMainPanel:function(){gameMainPanel.removeAllChild();var k=0.7;var z=0;var x=function(){if(BlocksWrap.ObjectList("LSprite").length!=0){var j=f.isGameOver()}};for(var s=0,p=bgBlocks.length;s<p;s++){var u=55*s;for(var r=0,o=bgBlocks[s].length;r<o;r++){var v=55*r;var t=new LShape();var m=createSprite({x:v,y:u},function(){t.graphics.drawRoundRect(0,"#ff0000",[0,0,52,52,7],true,bgBlocks[s][r].color);this.addChild(t)});if(score_x.isContain(s)||score_y.isContain(r)){var q=createSprite({x:v,y:u},function(){var j=new LShape();j.graphics.drawRoundRect(0,"#ff0000",[0,0,52,52,7],true,"#E2E2E2");this.addChild(j)});gameMainPanel.addChild(q);var w=createSprite({x:m.x,y:m.y},function(){this.addChild(m);m.x=m.getWidth()/2;m.y=m.getHeight()/2;t.x=-t.getWidth()/2;t.y=-t.getHeight()/2;k=k*0.85});LTweenLite.to(w.getChildAt(0),k,{scaleX:0,scaleY:0,ease:LEasing.Sine.easeOut,onComplete:function(){w.remove()}});bgBlocks[s][r].sign=0;bgBlocks[s][r].color="#E2E2E2";gameMainPanel.addChild(w);window.setTimeout(function(){isDisableScreen=false},700)}else{gameMainPanel.addChild(m)}}}if(score_x.length!=0||score_y.length!=0){window.setTimeout(function(){x()},k*1300);goneLine=score_x.length+score_y.length;var n=0;switch(goneLine){case 1:n=10;break;case 2:n=40;break;case 3:n=90;break;case 4:n=160;break;case 5:n=250;break;case 6:n=360;break}var y=parseInt(score1.value);score1.setNumber(y+n,function(){score1.x=(LGlobal.width/2-score1.getWidth())/2});score_x=[];score_y=[]}else{x()}},isGameOver:function(){var m=false;var q=function(z,t,A){for(var w=0,u=z.blockData.length;w<u;w++){for(var v=0,s=z.blockData[w].length;v<s;v++){if(z.blockData[w][v]==1){if((t+v>=item_x)||(A+w>=item_y)){return false}if(bgBlocks[A+w][t+v].sign==1){return false}}}}return true};var k=BlocksWrap.ObjectList("LSprite");for(var p=0,n=k.length;p<n;p++){var o=k[p];for(var j=0;j<item_x;j++){for(var r=0;r<item_y;r++){if(q(o,j,r)){return true}}}}addChild(i.gameOver());return false},testState:function(p){if(p.x<gameMainPanel.x-20||gameMainPanel.x>gameMainPanel.x+gameMainPanel.getWidth()+20){return false}if(p.y<gameMainPanel.y-20||gameMainPanel.y>gameMainPanel.y+gameMainPanel.getHeight()+20){return false}var x=100000;var r;var v=100;var u=100;for(var y in gameMainPanel.childList){if(!gameMainPanel.childList.hasOwnProperty(y)){continue}var w=gameMainPanel.childList[y];var m=Math.abs(p.x-(w.x+gameMainPanel.x));var k=Math.abs(p.y-(w.y+gameMainPanel.y));if((m+k)<x){x=(m+k);r=w;v=r.x/55;u=r.y/55}}for(var s=0,o=p.blockData.length;s<o;s++){for(var q=0,n=p.blockData[s].length;q<n;q++){if(p.blockData[s][q]==1){if((v+q>=item_x)||(u+s>=item_y)){return false}if(bgBlocks[u+s][v+q].sign==1){return false}}}}for(var s=0,o=p.blockData.length;s<o;s++){for(var q=0,n=p.blockData[s].length;q<n;q++){if(p.blockData[s][q]==1){bgBlocks[u+s][v+q].sign=1;bgBlocks[u+s][v+q].color=p.color}}}for(var s=0,o=item_y;s<o;s++){var t=true;for(var q=0,n=bgBlocks[s].length;q<n;q++){if(bgBlocks[s][q].sign==0){t=false;continue}}if(t){score_x.push(s)}}for(var s=0;s<item_x;s++){var t=true;for(var q=0,n=bgBlocks[s].length;q<n;q++){if(bgBlocks[q][s].sign==0){t=false;continue}}if(t){score_y.push(s)}}return true}};var a=(function(){var j=new Array();j.push({name:"",color:"#7C8FD5",data:[[1]]});j.push({name:"",color:"#FFC540",data:[[1,1]]});j.push({name:"",color:"#FFC540",data:[[1],[1]]});j.push({name:"",color:"#5ACB87",data:[[1,1],[1,0]]});j.push({name:"",color:"#5ACB87",data:[[1,0],[1,1]]});j.push({name:"",color:"#5ACB87",data:[[0,1],[1,1]]});j.push({name:"",color:"#5ACB87",data:[[1,1],[0,1]]});j.push({name:"",color:"#EF974A",data:[[1],[1],[1]]});j.push({name:"",color:"#EF974A",data:[[1,1,1]]});j.push({name:"",color:"#E76885",data:[[1],[1],[1],[1]]});j.push({name:"",color:"#E76885",data:[[1,1,1,1]]});j.push({name:"",color:"#95DB52",data:[[1,1],[1,1]]});j.push({name:"",color:"#5ABFE3",data:[[1,1,1],[1,0,0],[1,0,0]]});j.push({name:"",color:"#5ABFE3",data:[[1,1,1],[0,0,1],[0,0,1]]});j.push({name:"",color:"#5ABFE3",data:[[1,0,0],[1,0,0],[1,1,1]]});j.push({name:"",color:"#5ABFE3",data:[[0,0,1],[0,0,1],[1,1,1]]});j.push({name:"",color:"#DD6454",data:[[1,1,1,1,1]]});j.push({name:"",color:"#DD6454",data:[[1],[1],[1],[1],[1]]});j.push({name:"",color:"#4AD3AD",data:[[1,1,1],[1,1,1],[1,1,1]]});return j})();function c(l,k){base(this,LSprite,[]);var j=this;j.setView(l);j.scaleX=j.scaleY=0.5}c.prototype.position={};c.prototype.color=null;c.prototype.state=0;c.prototype.blockData=[];c.prototype.width=0;c.prototype.height=0;c.prototype.cony=0;c.prototype.score=0;c.prototype.isMoveIng=false;c.prototype.setView=function(p){var r=this;var k=this.blockData=a[p].data;r.color=a[p].color||"#7C8FD5";r.rotateCenter=false;for(var m=0;m<k.length;m++){var o=55*m;for(var l=0;l<k[m].length;l++){var q=55*l;var s=k[m][l];if(s==1){r.score+=1;var n=new LShape();n.graphics.drawRoundRect(0,"#ff0000",[q,o,52,52,8],true,r.color);r.addChild(n)}}}r.width=r.getWidth();r.height=r.getHeight();r.cony=(100+r.height)};function b(l,m,k){base(this,LSprite,[]);var j=this;j.sharpType=k||"1";j.value=l;j.scale=m||1;j.setView(l)}b.prototype.value=0;b.prototype.changeSpeed=0.1;b.prototype.defaultlength=0;b.prototype.spacing=0;b.prototype.scale=1;b.prototype.sharpType="1";b.prototype.singleWidth=0;b.prototype.setView=function(l){var j=this;var o=(l+"").split("");var n=new LSprite();n.x=0;for(var m=0;m<o.length;m++){var k=new LSprite();var l=parseInt(o[m]);k.addChild(new LBitmap(new LBitmapData(imglist["number"+j.sharpType+"_"+l])));k.scaleX=k.scaleY=j.scale;n.y=k.getHeight()/2;k.y=-k.getHeight()/2;k.x=j.singleWidth=n.getWidth()+j.spacing;n.addChild(k);j.addChild(n)}};b.prototype.setNumber=function(m,j){var l=this;l.value=m;if(l.defaultlength!=0){var q=parseInt(m);var k="";var o=l.defaultlength-(q+"").length;for(var n=0;n<o;n++){k+="0"}k+=q;m=k}var p=l.getChildAt(0);LTweenLite.to(p,l.changeSpeed,{scaleY:0,onComplete:function(){l.removeAllChild();l.setView(m);p=l.getChildAt(0);p.scaleY=0;LTweenLite.to(p,l.changeSpeed,{scaleY:1,onComplete:function(){if(j){j.call(l)}}})}})};LInit(30,"canvas",640,960,e,LEvent.INIT)})(window);