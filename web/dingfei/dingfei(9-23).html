
<head>
    <meta content="width =device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
</head>
<body>

    <style>
        *{margin:0;padding:0;}
        
        .dingfeiWrap #canvas { text-align: center; }
            .dingfeiWrap #canvas > div { left: 0; top: 0; overflow: hidden !important; }
        .dingfeiWrap  .sharePage { background: url("http://img10.360buyimg.com/cms/jfs/t2311/142/308287642/2891/a2a35651/55ffccc3N77870c67.png"); height: 100%; position: absolute; width: 100%; padding: 0; left: 0; top: 0;display:none  }
        .dingfeiWrap  .priceWrap { height: 4em; margin-top: 25%; background: url("http://img10.360buyimg.com/cms/jfs/t1894/322/341513896/21996/d6e8e828/55ffcd3fN8305382e.png") center; background-size: 100% 100%;color: #fff; font-size: 2em; text-align: center; }
            .dingfeiWrap  .priceWrap h2 { display: inline-block;line-height:2em;font-size:1.7em}
        .dingfeiWrap  .shareContent { text-align: center; color: #fff; line-height: 3em; margin-top: 3em; font-size: 0.8em; }
            .dingfeiWrap  .shareContent b, .shareContent span { color: #ffc000; font-size: 1.2em; margin: 0 0.2em; }
            .dingfeiWrap  .shareContent strong { font-size: 2em; color: #ffc000; }
            .dingfeiWrap .shareContent b { font-size: 2em; }
        .dingfeiWrap  .btusWrap { text-align: center; margin: 2em auto; }
            .dingfeiWrap  .btusWrap input { width: 42%; height: 2em; border: 0; padding: 0; border-radius: 2em; font-size: 1.5em; font-weight: bold; }
                .dingfeiWrap  .btusWrap input:first-child { background: #cd0208; color: #fef800; }
                .dingfeiWrap  .btusWrap input:last-child { background: #fff; color: #cd0208; }

        .dingfeiWrap  #share_weak { position: absolute; width: 100%; height: 100%; background: rgba(0,0,0,0.8) url("http://img13.360buyimg.com/cms/jfs/t1279/14/507220590/16193/6ae004a5/5582748bN68c1aad8.png") no-repeat; background-size: 100% 40%; display: none; }

        .roleWrap {height: 100%; position: absolute; width: 100%; padding: 0; left: 0; top: 0;background-color:#fff;font-size:0.8em;padding-top:4em;
                   background:url(http://img10.360buyimg.com/cms/jfs/t2305/92/338104713/5698/fc245fbb/56012f77Na2e627ef.png) no-repeat;background-size:100%;display:none}
            .roleWrap > div { width: 100%; background-color:#fff}
            .roleWrap > div div { margin:0 auto;width:80%;margin-bottom:2em;background:#fff;}
            .roleWrap .close { position:fixed;right:1em;top:1em;width:10%;width:2em;height:2em;background:url(http://img13.360buyimg.com/cms/jfs/t2146/23/329596115/4730/428fa54c/56012f77N0c3e2959.png);background-size: 100% 100%;}
            
    </style>
    <div class="dingfeiWrap">
        <div id="canvas">
            <img src="http://img14.360buyimg.com/cms/jfs/t865/49/1034073230/6017/6f27d16f/556c0030N1f282f1f.gif" alt="" />
        </div>
        <div class="sharePage">
            <div class="priceWrap">
                ￥<h2>50</h2>元
            </div>
            <div class="shareContent">
                吓死本宝宝了！你在10s内一共顶了 <strong id="hitCount">70</strong> 次金币<br />
                <span>手速击败了82%的全国人民</span><br />
                可获得<b>8</b>元话费充值优惠券
            </div>
            <div class="btusWrap">
                <input type="button" id="btu_share" data-role="none" value="分享领卷" />
                <input type="button" id="btu_again" data-role="none" value="再玩一次" />
            </div>

        </div>
        <div class="roleWrap">
            <div>
                <span class="close"></span>
                <div>
                    <h3>活动时间</h3>
                    2015年9月28日 00:00—2015年10月8日 23:59
                    <h3>
                        玩游戏领券
                    </h3>
                    点击开始游戏，根据结果获得相应面额优惠券
                    <h3>
                        分享得券
                    </h3>
                    分享指定活动页面至微信朋友圈或微信好友可获得一张X元话费充值满减券（以下简称“满减券”）。
                    <h3>
                        12倍话费大奖励
                    </h3>
                    活动结束后，在使用本满减券参加活动成功充值的用户中，抽取1名幸运用户，赠送12张话费充值现金抵用券（以下简称”抵用券”），每张抵用券金额与用户使用优惠券当次充值面额相等。
                    <h3>
                        奖券发放规则
                    </h3>
                    满减券在用户在玩游戏后以及分享指定页面后，即时进入用户领券电话号码对应的京东钱包账户中，所得满减券在京东钱包进行单次充值面额在100元以上时可用以减少X元的支付金额；<br />
                    抵用券在本活动结束后10个工作日内发放至中奖用户京东钱包中，请到“我的”-“卡券”中查看，具体开奖信息请关注京东钱包-公告。同一用户累计中奖金额不得超过5000元，满减券与抵用券不能同时使用。
                    <h3>
                        奖券使用规则
                    </h3>
                    1.	仅限京东钱包客户端手机话费充值使用，且单笔话费充值实付金额大于或等于95元时可使用，同一订单只能使用一张抵用券；<br />
                    2.	满减券自领券之日起15天内有效，过期自动作废；<br />
                    3.充值时输入充值手机号及金额，点击“立即充值”后，即可选择可使用的抵用券；<br />
                    4.抵用券须在2015年11月1日至2016年10月31日期间使用，每个自然月仅可使用一张，分12个月使用，抵用券在相应自然月内有效，过期作废；<br />
                    5.抵用券不可拆分使用、不可转赠、不可找零、不可兑现；<br />
                    6.如使用抵用券的订单发生退款，在抵用券有效期内的，则抵用券退回至用户的账户，抵用券退回后有效期不变，如已过有效期则抵用券不再退还，仅退用户实付金额。
                    <h3>
                        其他
                    </h3>
                    1．在本活动期间，如存在违规行为（包含但不限于恶意套取资金、机器作弊、虚假交易等违反诚实信用原则行为），主办方将取消您的领券资格，并有权撤销相关违规交易，不予发放相关奖品，必要时追究法律责任；<br />
                    2．如用户有作弊刷单等违规行为，将取消一切奖励并追究责任；<br />
                    3．本活动规则及其未尽事宜同时受《京东钱包服务协议》及相关公告、规则约束；<br />
                    4. 在法律允许的范围内，网银在线对本次活动有解释权。

                </div>
            </div>
        </div>
        <div id="share_weak"></div>
    </div>
    
</body>
<script>
    
    function seriesLoadScripts(scripts, callback) {
        if (typeof (scripts) != "object") var scripts = [scripts];
        var HEAD = document.getElementsByTagName("head").item(0) || document.documentElement;
        var s = new Array(), last = scripts.length - 1, recursiveLoad = function (i) {  //递归
            s[i] = document.createElement("script");
            s[i].setAttribute("type", "text/javascript");
            s[i].onload = s[i].onreadystatechange = function () { //Attach handlers for all browsers
                if (!/*@cc_on!@*/0 || this.readyState == "loaded" || this.readyState == "complete") {
                    this.onload = this.onreadystatechange = null; this.parentNode.removeChild(this);
                    if (i != last) recursiveLoad(i + 1); else if (typeof (callback) == "function") callback();
                }
            }
            s[i].setAttribute("src", scripts[i]);
            HEAD.appendChild(s[i]);
        };
        recursiveLoad(0);
    }
    seriesLoadScripts(["http://code.jquery.com/jquery-1.8.2.min.js","http://lufylegend.com/js/lufylegend-1.9.10.min.js", "http://hammerjs.github.io/dist/hammer.min.js"], function () {
        $(function () {
            (new Hammer($("#btu_again")[0])).on('tap', function (evt) {
                $(".sharePage").hide();
                gameStart();
            });
            (new Hammer($("#btu_share")[0])).on('tap', function (evt) {
                $("#share_weak").fadeIn();
                window.setTimeout(function () {
                    $("#share_weak").fadeOut();
                }, 2000);
            });
            (new Hammer($(".close")[0])).on('tap', function (evt) {
                $(".roleWrap").fadeOut();
            });

        });
        (function (exp) {
            exp.onresize = function () { LGlobal.resize(); }
            LGlobal.destroy = true; //保证游戏中的不用的对象能够顺利被释放
            //LGlobal.preventDefault = false;
            
            LGlobal.align = LStageAlign.BOTTOM_MIDDLE;
            var moneyText, raminTime, moneyBox, joy;//钱,时间
            var gameTime = 10;

            //var shareInfoFactory = {
            //    hitCount: 0,
            //    data: [
            //        { len: { min: 0, max: 10 }, info: "你敢再慢点么！你在10s内一共顶了N次金币", info2: "手速已经在全国用户中垫底了", info3: "可获得<b>6</b>元话费充值优惠券", money: 6 },
            //        { len: { min: 10, max: 20 }, info: "你可以更快的！你在10s内一共顶了N次金币", info2: "手速击败了 60% 的全国用户", info3: "可获得<b>7</b>元话费充值优惠券", money: 7 },
            //        { len: { min: 20, max: 25 }, info: "哎呦，不错呦！你在10s内一共顶了N次金币", info2: "手速击 70% 的全国用户", info3: "可获得<b>8</b>元话费充值优惠券", money: 8 },
            //        { len: { min: 25, max: 30 }, info: "单身20年的手速！你在10s内一共顶了N次金币", info2: "手速击败了 80% 的全国用户", info3: "可获得<b>9</b>元话费充值优惠券", money: 9 },
            //        { len: { min: 30, max: 1000 }, info: "吓死本宝宝了！你在10s内一共顶了N次金币", info2: "手速击败了 90% 的全国用户", info3: "可获得<b>10</b>元话费充值优惠券", money: 10 }
            //    ],
            //    get: function (count) {
            //        this.hitCount = count;
            //        for (var i = 0; i < this.data.length; i++) {
            //            var _data = this.data[i];
            //            console.log(count);
            //            if (_data.len.min <= count && count < _data.len.max) {
            //                var _str = new String(_data.info);
            //                var _info = _data.info.replace(/N/g, count);
            //                var outData = jQuery.extend({}, _data, { info: _info });
            //                return outData;
            //            }
            //        }
            //        return this.data[0];
            //    }
            //}
            var shareInfoFactory = {
                hitCount: 0,
                data: [
                    { len: { min: 0, max: 10 }, info: "你敢再慢点么！你在10s内一共顶了N次金币<br /><span>手速已经在全国用户中垫底了</span><br />可获得<b>6</b>元话费充值优惠券", money: 6 },
                    { len: { min: 10, max: 20 }, info: "你可以更快的！你在10s内一共顶了N次金币<br /><span>手速击败了 60% 的全国用户</span><br />可获得<b>7</b>元话费充值优惠券", money: 7 },
                    { len: { min: 20, max: 25 }, info: "哎呦，不错呦！你在10s内一共顶了N次金币<br /><span>手速击 70% 的全国用户</span><br />可获得<b>8</b>元话费充值优惠券", money: 8 },
                    { len: { min: 25, max: 30 }, info: "单身20年的手速！你在10s内一共顶了N次金币<br /><span>手速击败了 80% 的全国用户</span><br />可获得<b>9</b>元话费充值优惠券", money: 9 },
                    { len: { min: 30, max: 1000 }, info: "吓死本宝宝了！你在10s内一共顶了N次金币<br /><span>手速击败了 90% 的全国用户</span><br />可获得<b>10</b>元话费充值优惠券", money: 10 }
                ],
                get: function (count) {
                    this.hitCount = count;
                    for (var i = 0; i < this.data.length; i++) {
                        var _data = this.data[i];
                        console.log(count);
                        if (_data.len.min <= count && count < _data.len.max) {
                            //var _str = new String(_data.info);
                            var _info = _data.info.replace(/N/g, count);
                            var outData = jQuery.extend({}, _data, { info: _info });
                            return outData;
                        }
                    }
                    return this.data[0];
                }
            }
            var isRuning = false;
            //获取随机数
            exp.getRedom = function (minNum, maxNum) {
                switch (arguments.length) {
                    case 1: return parseInt(Math.random() * minNum + 1);
                    case 2: return parseInt(Math.random() * (maxNum - minNum + 1) + minNum);
                    default: return 0;
                }
            }
            LSprite.prototype.align = function () { this.x = (LGlobal.width - this.getWidth()) / 2; }//居中
            LButton.prototype.align = function () { this.x = (LGlobal.width - this.getWidth()) / 2; }//居中
            var imgData = new Array(
                { name: "close", path: "http://img13.360buyimg.com/cms/jfs/t2146/23/329596115/4730/428fa54c/56012f77N0c3e2959.png" },
                { name: "price_bg", path: "http://img10.360buyimg.com/cms/jfs/t2305/92/338104713/5698/fc245fbb/56012f77Na2e627ef.png" },
                { name: "qxgzmb", path: "http://img10.360buyimg.com/cms/jfs/t2311/142/308287642/2891/a2a35651/55ffccc3N77870c67.png" },
                { name: "bg", path: "http://img12.360buyimg.com/cms/jfs/t2410/58/330414902/100793/243a1c45/55ffcc64N043a04d5.png" },
                { name: "btu_1", path: "http://img14.360buyimg.com/cms/jfs/t1774/267/1659266019/7497/77132ad5/55ffcc84N10be9d3e.png" },
                { name: "btu_1_hover", path: "http://img13.360buyimg.com/cms/jfs/t2026/90/320075934/7495/72fb6abe/55ffcc84Nfd3d6e0f.png" },
                { name: "game_bg", path: "http://img12.360buyimg.com/cms/jfs/t2026/83/346033562/11263/2a59af22/55ffcc84Ncc9fb65b.png" },
                { name: "floor", path: "http://img10.360buyimg.com/cms/jfs/t2056/169/330444264/101608/dad9b658/55ffcc85Nff3b454e.png" },
                { name: "headerWrap", path: "http://img11.360buyimg.com/cms/jfs/t1825/234/1624837473/5635/a7c3de0f/55ffcc84Nb4370cf0.png" },
                { name: "moneyBox", path: "http://img13.360buyimg.com/cms/jfs/t2068/231/303253281/11742/aa7a5d67/55ffccc3Nc09b89be.png" },
                { name: "joy_1", path: "http://img12.360buyimg.com/cms/jfs/t2047/219/320487950/16764/e0e7a97c/55ffccc3N6ea62c68.png" },
                { name: "joy_2", path: "http://img12.360buyimg.com/cms/jfs/t1762/151/1625848058/12380/8612b664/55ffccc3Ne892ad6c.png" },
                { name: "joy_3", path: "http://img14.360buyimg.com/cms/jfs/t1828/242/1651296075/11208/e212d611/55ffccc3N7fb7d37c.png" });

            function main() {
                LGlobal.stageScale = LStageScaleMode.EXACT_FIT;
                LSystem.screen(LStage.FULL_SCREEN);
                backLayer = new LSprite();
                backLayer.graphics.drawRect(1, "#cccccc", [0, 0, LGlobal.width, LGlobal.height], true, "#000000");
                //背景显示
                addChild(backLayer);
                loadingLayer = new LoadingSample1();
                backLayer.addChild(loadingLayer);

                LLoadManage.load(imgData, function (progress) {
                    //document.getElementById("loadingBg_div").innerHTML = progress + "%";
                    loadingLayer.setProgress(progress);
                }, gameInit);
            }
            //读取完所有图片，进行游戏标题画面的初始化工作
            function gameInit(result) {
                //取得图片读取结果
                imglist = result;
                //移除进度条层//移除或者这样写 loadingLayer.remove();
                backLayer.removeChild(loadingLayer);
                //加入欢迎页
                backLayer.addChild(initPages.indexPage());
                backLayer.addEventListener(LEvent.ENTER_FRAME, function () { });
            }
            //加载界面
            var initPages = {
                indexPage: function () {
                    var returnPage = new LSprite();
                    returnPage.addChild(new LBitmap(new LBitmapData(imglist["bg"])));
                    //加入按钮
                    var button = new LButton(new LBitmap(new LBitmapData(imglist["btu_1"])), new LBitmap(new LBitmapData(imglist["btu_1"])));
                    button.align();
                    button.y = 740;
                    button.addEventListener(LMouseEvent.MOUSE_UP, function () {
                        gameStart();
                    });
                    //加入查看活动按钮
                    var btu = new LSprite();
                    var link = new LTextField();
                    link.text = "查看活动规则"; link.size = 20; link.color = "#ffffff";
                    btu.addChild(link);
                    btu.align();
                    btu.y = 950;
                    btu.addEventListener(LMouseEvent.MOUSE_UP, function () {
                        //alert("打开规则");
                        //LGlobal.preventDefault = false;
                        $(".roleWrap").show();
                    });
                    returnPage.addChild(button);
                    returnPage.addChild(btu);
                    return returnPage;
                },
                gamePage: function () {
                    var returnPage = new LSprite();
                    var bg = new Background();
                    returnPage.addChild(bg);//背景
                    gameTime = 10;
                    var floor = new LBitmap(new LBitmapData(imglist["floor"]));
                    floor.y = LGlobal.height - floor.getHeight();
                    returnPage.addChild(floor);//草地
                    returnPage.addChild(new LBitmap(new LBitmapData(imglist["headerWrap"])));//顶部
                    moneyText = new LTextField();
                    moneyText.text = "0"; moneyText.size = 32; moneyText.color = "#ffc000"; moneyText.x = 120; moneyText.y = 15;
                    raminTime = new LTextField();
                    raminTime.text = "10'00''"; raminTime.size = 32; raminTime.color = "#ffc000"; raminTime.x = 500; raminTime.y = 15;
                    returnPage.addChild(moneyText);//钱
                    returnPage.addChild(raminTime);//时间
                    moneyBox = new MoneyBox();
                    returnPage.addChild(moneyBox);
                    joy = new Joy();
                    returnPage.addChild(joy);
                    returnPage.addEventListener(LEvent.ENTER_FRAME, function () {
                        bg.run(); moneyBox.run(); joy.run();
                        if (LGlobal.hitTestRect(moneyBox, joy)) {
                            moneyBox.hit(); joy.hit();
                        }
                    });
                    returnPage.addEventListener(LMouseEvent.MOUSE_DOWN, function () {
                        if (isRuning == false && joy.state != 1) {
                            isRuning = true;
                            var _gameTime = --gameTime;
                            raminTime.text = _gameTime + "'00''";
                            var timer = window.setInterval(function () {
                                _gameTime--;
                                if (_gameTime < 0) {
                                    joy.state = 2;
                                    joy.setView();
                                    isRuning = false;
                                    window.clearInterval(timer);
                                    raminTime.x = 500;
                                }
                            }, 1000);

                            var stime = 60;
                            var timer2 = window.setInterval(function () {
                                stime--;
                                if (_gameTime <= 0) {
                                    raminTime.text = "0'" + stime + "''";
                                    if (stime <= 0) {
                                        raminTime.text =  "0'00''";
                                        window.clearInterval(timer2);
                                        returnPage.die();
                                        gameOver();
                                    }
                                } else {
                                    raminTime.text = _gameTime + "'" + stime + "''";
                                }

                                if (stime == 0) { stime = 60; }
                            }, 10);
                        }
                        if (joy.state == 2 && isRuning == true) {
                            joy.state = 3;
                            joy.setView();
                        }
                    });
                    returnPage.addEventListener(LMouseEvent.MOUSE_UP, function () { });
                    return returnPage;
                },
                resultPage: function () {
                    var returnPage = new LSprite();
                    returnPage.addChild(new LBitmap(new LBitmapData(imglist["game_bg"])));
                    var moneyWrap = new LSprite();
                    moneyWrap.addChild(new LBitmap(new LBitmapData(imglist["price_bg"]))); moneyWrap.align(); moneyWrap.y = 40;
                    returnPage.addChild(moneyWrap);
                    var _money = new LTextField();
                    _money.color = "#ffffff"; _money.text = "19"; _money.x = 255; _money.y = 60; _money.size = 100;
                    _money.x = (moneyWrap.getWidth() - _money.getWidth()) / 2 - 10;
                    moneyWrap.addChild(_money);
                    var textLine_1 = new LTextField();
                    textLine_1.color = "#ffffff"; textLine_1.x = 255; textLine_1.y = 250; textLine_1.size = 28;
                    textLine_1.text = shareInfoFactory.data[0].info;
                    textLine_1.x = (moneyWrap.getWidth() - textLine_1.getWidth()) / 2;
                    moneyWrap.addChild(textLine_1);
                    return returnPage;
                }
            }

            //游戏开始
            exp.gameStart = function () {
                backLayer.die();
                backLayer.removeAllChild();
                //LGlobal.preventDefault = false;
                //backLayer.addChild(initPages.resultPage());
                backLayer.addChild(initPages.gamePage());
            }

            //游戏结束
            var gameOver = function (type, food) {
                //LGlobal.preventDefault = false;
                window.setTimeout(function () {
                    //console.log(_si.info);
                    //$.mobile.changePage("#share", "slide");
                    backLayer.die();
                    backLayer.removeAllChild();
                    var _si = shareInfoFactory.get(parseInt(moneyText.text));
                    $(".sharePage").show();
                    $(".shareContent").html(_si.info);
                    $(".priceWrap h2").html(_si.money);
                    //backLayer.addChild(initPages.resultPage());
                }, 1000);
            }
            function MoneyBox() {
                base(this, LSprite, []);
                var self = this;
                self.setView();
            }
            MoneyBox.prototype.setView = function () {
                var self = this;
                self.addChild(new LBitmap(new LBitmapData(imglist["moneyBox"])));
                self.align(); self.y = 290;
            }
            MoneyBox.prototype.state = 1;
            MoneyBox.prototype.run = function () {
                var _self = this;
                switch (_self.state) {
                    case 1:
                        _self.y = 290;
                        break;
                    case 2:
                        //上升
                        _self.y -= 5;
                        if (_self.y <= 280) {
                            _self.state = 3;
                        }
                        break;
                    case 3:
                        //回落
                        _self.y += 5;
                        if (_self.y >= 290) {
                            _self.state = 1;
                        }
                        break;
                }
            }
            MoneyBox.prototype.hit = function () {
                var money1 = new LTextField();
                money1.text = "+1"; money1.size = 44; money1.color = "#ffc000";
                money1.x = (this.getWidth() - money1.getWidth()) / 2;
                money1.y = -40;
                //money1.x = (LGlobal.width - this.getWidth()) / 2; money1.y = this.y;
                this.addChild(money1);
                var tween = LTweenLite.to(money1, 0.8, {
                    y: -150, alpha: 0, loop: false, ease: LEasing.Sine.easeOut, onComplete: function () { }
                });
                var moneyValue = parseInt(moneyText.text);
                //alert(moneyValue);
                moneyText.text = ++moneyValue;
                if (moneyValue == 10) { moneyText.x -= 16; } else if (moneyValue == 20) { moneyText.x = 109; }
                this.state = 2;
            }

            function Joy() {
                base(this, LSprite, []);
                var self = this;
                self.setView();
            }
            Joy.prototype.setView = function () {
                var _self = this;
                _self.removeAllChild();
                switch (_self.state) {
                    case 1:
                        _self.y = 580;
                        _self.addChild(new LBitmap(new LBitmapData(imglist["joy_1"])));
                        break;
                    case 2:
                        _self.y = 580;
                        _self.addChild(new LBitmap(new LBitmapData(imglist["joy_2"])));
                        break;
                    case 3:
                        _self.addChild(new LBitmap(new LBitmapData(imglist["joy_3"])));
                        break;
                    case 4:
                        _self.addChild(new LBitmap(new LBitmapData(imglist["joy_3"])));
                        break;
                }
            }
            Joy.prototype.state = 1;
            Joy.prototype.weight = 0.93;
            Joy.prototype.run = function () {
                var _self = this;
                switch (_self.state) {
                    case 1:
                        var _x = (LGlobal.width - _self.getWidth()) / 2 + 10;
                        if (_self.x >= _x) {
                            _self.state = 2;
                            _self.setView();
                        } else {
                            _self.x += 5;
                        }
                        break;
                    case 2://预备状态
                        _self.x = _self.x;
                        break;
                    case 3://起跳状态
                        if (_self.y <= moneyBox.y) {
                            _self.state = 4;
                            _self.setView();
                        }
                        _self.y = _self.y * _self.weight * 0.98;
                        break;
                    case 4://下落状态
                        if (_self.y >= 570) {
                            _self.state = 2;
                            _self.setView();
                        } else {
                            _self.y = _self.y * _self.weight * 1.17;
                        }
                        break;
                }
            }
            Joy.prototype.hit = function () {
                this.state = 4;
            }

            function Background() {
                base(this, LSprite, []);
                var self = this;
                self.setView();
            }
            Background.prototype.setView = function () {
                var self = this;
                var bg1 = new LSprite(); var bg2 = new LSprite();
                bg1.addChild(new LBitmap(new LBitmapData(imglist["game_bg"])));
                bg2.addChild(new LBitmap(new LBitmapData(imglist["game_bg"])));
                bg2.x = LGlobal.width;
                self.addChild(bg1); self.addChild(bg2);
            }
            Background.prototype.speed = 2;
            Background.prototype.run = function () {
                var _self = this;
                _self.x -= _self.speed;
                if (_self.x <= -LGlobal.width) {
                    _self.x = 0;
                }
            }

            var loadImages = function (url, callBack) {
                var img = new Image(); //创建一个Image对象，实现图片的预下载
                img.onload = function () { img.onload = null; callBack(img); }
                img.src = url;
            }
            init(30, "canvas", 640, 1008, function () {
                main();
            });
        })(window);
    });
</script>